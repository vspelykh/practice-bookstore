<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html"
      lang="en" data-layout-decorate="~{fragments/layout}">
<head>
    <title>VSP Bookstore</title>
</head>
<body>
<!-- page content -->
<main data-layout-fragment="content" style="padding-top: 55px">
    <!--    logo and cart-->
    <div id="parent" class="navbar navbar-expand-lg navbar-dark logo-margin bg-secondary">
        <img class="logo child" src="/img/favicons/android-chrome-192x192.png" width="100" height="100"
             alt="Logo of company">
        <div style="color: white">
            <h2>The first private bookstore</h2>
        </div>
        <div style="margin-right: 20px" class="child">
            <!--/*@thymesVar id="cartSum" type="java.lang.Integer"*/-->
            <i th:text="'Total sum : ' + ${cartSum} +  ' grivnias'" class="cart"></i>
            <a th:href="@{cart}"><img src="/img/cart.png" alt="Cart" width="40" height="40" class="fa"/></a>
            <!--/*@thymesVar id="cartCapacity" type="java.lang.Integer"*/-->
            <span class="badge badge-notify my-cart-badge" id='lblCartCount' th:text="${cartCapacity}"></span>
        </div>
    </div>
    <!--    carousel-->
    <div style="background-image: linear-gradient(#6c757d, white)" id="myCarousel" class="carousel slide"
         data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class=""
                    aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"
                    class=""></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"
                    class="active"
                    aria-current="true"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item">
                <img style="display: block; margin-left: auto; margin-right: auto" src="/img/book_stack.jpg"
                     alt="top-30"
                     width="800" height="400" class="fa"/>
                <div class="container">
                    <div class="carousel-caption">
                        <h1 class="carousel-font-style">Discount books.</h1>
                        <p class="carousel-font-style-small">Find best books for you with discount</p>
                        <p><a class="btn btn-lg btn-primary" href="#">Look</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img style="display: block; margin-left: auto; margin-right: auto" src="/img/bestseller.jpg"
                     alt="top-30" width="800" height="400" class="fa"/>
                <div class="container">
                    <div class="carousel-caption">
                        <h1 class="carousel-font-style">Bestseller.</h1>
                        <p class="carousel-font-style-small">Best book of last time</p>
                        <p><a class="btn btn-lg btn-primary" href="#">Learn more</a></p>
                    </div>
                </div>
            </div>
            <div class="carousel-item active">
                <img style="display: block; margin-left: auto; margin-right: auto" src="/img/store.jpg"
                     alt="top-30" width="800" height="400" class="fa"/>
                <div class="container">
                    <div class="carousel-caption">
                        <h1 class="carousel-font-style">Our shops</h1>
                        <p class="carousel-font-style-small">You can find us all around the country</p>
                        <p><a class="btn btn-lg btn-primary" href="#">Find in your city</a></p>
                    </div>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <!--    sidebar-->
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav" style="margin-top: 190px; float: right">
            <nav class="sb-sidenav accordion sb-sidenav-light" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <!--                        accordion-->
                        <div class="accordion" id="accordionPanelsStayOpenExample">
                            <form id="filtration" name="filtration" th:action="@{/}" method="get">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                                                aria-controls="panelsStayOpen-collapseOne">
                                            Categories:
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                                         aria-labelledby="panelsStayOpen-headingOne">
                                        <div class="accordion-body">
                                            <!--                        /*@thymesVar id="categoriesDTO" type="java.util.List"*/-->
                                            <!--                        /*@thymesVar id="categories" type="java.util.List"*/-->
                                            <!--                        /*@thymesVar id="category" type="ua.hillel.bookstore.persistence.dto.CategoryDTO"*/-->

                                            <label class="form-check" th:each="category : ${categoriesDTO}">
                                                <!--/*@thymesVar id="getId" type="java.lang.Integer"*/-->
                                                <input name="categories" class="form-check-input filter-categories"
                                                       type="checkbox"
                                                       th:checked="${categories !=null && categories.contains(category.id)}"
                                                       th:value="${category.id}"
                                                       th:id="${category}">
                                                <label th:text="${category.name}" class="form-check-label"
                                                       th:for="${category}">
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                                                aria-controls="panelsStayOpen-collapseTwo">
                                            Subcategories:
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse"
                                         aria-labelledby="panelsStayOpen-headingTwo">
                                        <div class="accordion-body">
                                            <!--                                        /*@thymesVar id="subcategories" type="java.util.List"*/-->

                                            <!--                                        /*@thymesVar id="subcategoriesDTO" type="java.util.List"*/-->
                                            <!--                                        /*@thymesVar id="subCategory" type="ua.hillel.bookstore.persistence.dto.SubCategoryDTO"*/-->
                                            <label class="form-check" th:each="subCategory : ${subcategoriesDTO}">
                                                <!--/*@thymesVar id="getId" type="java.lang.Integer"*/-->
                                                <input name="subcategories"
                                                       class="form-check-input filter-subcategories"
                                                       type="checkbox"
                                                       th:checked="${subcategories !=null && subcategories.contains(subCategory.id)}"
                                                       th:value="${subCategory.id}"
                                                       th:id="${subCategory}">
                                                <label th:text="${subCategory.name}" class="form-check-label"
                                                       th:for="${subCategory}">
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                                                aria-controls="panelsStayOpen-collapseThree">
                                            Publishers:
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
                                         aria-labelledby="panelsStayOpen-headingThree">
                                        <div class="accordion-body">
                                            <!--                                        /*@thymesVar id="publishers" type="java.util.List"*/-->
                                            <!--                                        /*@thymesVar id="publishersDTO" type="java.util.List"*/-->
                                            <!--                                        /*@thymesVar id="publisher" type="ua.hillel.bookstore.persistence.dto.PublisherDTO"*/-->
                                            <label class="form-check" th:each="publisher : ${publishersDTO}">
                                                <!--/*@thymesVar id="getId" type="java.lang.Integer"*/-->
                                                <input name="publishers" class="form-check-input filter-publishers"
                                                       type="checkbox"
                                                       th:checked="${publishers !=null && publishers.contains(publisher.id)}"
                                                       th:value="${publisher.id}"
                                                       th:id="${publisher}">
                                                <label th:text="${publisher.name}" class="form-check-label"
                                                       th:for="${publisher}">
                                                </label>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                                        <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false"
                                                aria-controls="panelsStayOpen-collapseFour">
                                            Price:
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse"
                                         aria-labelledby="panelsStayOpen-headingFour">
                                        <div class="accordion-body">
                                            <label>
                                                <a>Minimum price:</a>
                                                <!--/*@thymesVar id="minPrice" type="java.lang.Integer"*/-->
                                                <input type="number" id="min" name="min" th:value="${minPrice}">
                                                <a>Maximum price:</a>
                                                <!--/*@thymesVar id="maxPrice" type="java.lang.Integer"*/-->
                                                <input type="number" id="max" name="max" th:value="${maxPrice}">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Filter</button>
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content" class="sb-sidenav">
            <!--            table-->
            <div class="container-xl table-book-body">
                <div class="table-responsive">
                    <div class="table-wrapper">
                        <div class="table-title">
                            <div class="row">
                                <div class="col-sm-8"><h2>Books <b>Details</b></h2></div>
                                <div class="col-sm-4">
                                    <div class="search-box">
                                        <!--                                        search-->
                                        <label>
                                            <!--/*@thymesVar id="search" type="java.lang.String"*/-->
                                            <input name="search" type="text" class="form-control search-table"
                                                   form="filtration" placeholder="Find book by title and/or author"
                                                   th:value="${search}">
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!--                        rows-->
                            <!--/*@thymesVar id="size" type="java.util.List"*/-->
                            <!--/*@thymesVar id="sizes" type="java.util.List"*/-->
                            <!--/*@thymesVar id="sizeToChoose" type="java.lang.Integer"*/-->
                            <!--/*@thymesVar id="currentSize" type="java.lang.Integer"*/-->
                            <div class="dropdown">
                                <a class="btn btn-secondary dropdown-toggle" href="#" role="button"
                                   th:text="${currentSize}"
                                   data-bs-toggle="dropdown" aria-expanded="false">
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <label class="dropdown-item" th:each="sizeToChoose : ${sizes}">
                                            <input name="size" form="filtration" class="form-check-input filter-size"
                                                   type="radio" onclick="this.form.submit();"
                                                   th:checked="${sizeToChoose == currentSize}"
                                                   th:value="${sizeToChoose}"
                                                   th:id="${sizeToChoose}">
                                            <label th:text="${sizeToChoose}" class="form-check-label"
                                                   th:for="${sizeToChoose}">
                                            </label>
                                        </label>
                                    </li>
                                </ul>
                                <h6 th:text="'  rows per page'"></h6>
                            </div>
                            <table class="table table-striped table-hover table-bordered">
                                <thead>
                                <tr>
                                    <th width="10%">Cover<i class="fa fa-sort"></i></th>
                                    <th>Title<i class="fa fa-sort"></i></th>
                                    <th>Author<i class="fa fa-sort"></i></th>
                                    <th>Publisher<i class="fa fa-sort"></i></th>
                                    <th>Year<i class="fa fa-sort"></i></th>
                                    <th>Price<i class="fa fa-sort"></i></th>
                                    <th>Add to cart</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!--                                table body-->
                                <!--/*@thymesVar id="books" type="org.springframework.data.domain.Page"*/-->
                                <!--/*@thymesVar id="book" type="ua.hillel.bookstore.persistence.dto.BookDTO"*/-->
                                <tr th:each="book: ${books}">
                                    <td>
                                        <img width="85%" height="85%" th:src="@{${book.coverImageUrl}}">
                                    </td>
                                    <td th:text="${book.title}"></td>
                                    <td th:text="${book.author.name}"></td>
                                    <td th:text="${book.publisher.name}"></td>
                                    <td th:text="${book.year}"></td>
                                    <td th:text="${book.price}"></td>
                                    <td>
                                        <div class="list-group">
                                            <form name="add-quantity" method="post" th:action="@{/cart}">
                                                <a th:if="${book.isAvailable()}">
                                                    <input id="id" name="id" type="hidden" th:value="${book.id}">
                                                    <input id="quantity" name="quantity" type="hidden" th:value="1">
                                                    <input id="action" name="action" type="hidden" th:value="'add'">
                                                    <button type="submit" th:if="${book.isAvailable()}"
                                                            style="margin-top: 10px"
                                                            class="btn btn-primary my-cart-btn">Add to cart
                                                    </button>
                                                </a>
                                            </form>
                                            <a th:if="${!book.isAvailable()}">
                                                <p style="color: red; margin-top: 15px"
                                                   th:text="'Not available'"></p>
                                            </a>
                                            <form name="add-wishlist" method="post" th:action="@{/wishlist}">
                                                <input name="id" type="hidden" th:value="${book.id}">
                                                <input name="action" type="hidden" th:value="'add'">
                                                <button type="submit" th:if="${book.isAvailable()}"
                                                        style="margin-top: 10px"
                                                        class="btn btn-success my-cart-btn">To wishlist
                                                </button>
                                            </form>
                                            <a th:href="@{'/book/{id}'(id=${book.id})}">
                                                <button style="margin-top: 10px"
                                                        class="btn btn-dark" onclick=""
                                                >Details
                                                </button>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <!--/*@thymesVar id="books" type="org.springframework.data.domain.Page"*/-->
                            <nav aria-label="Page navigation">
                                <!--/*@thymesVar id="pageNumbers" type="java.lang.Integer"*/-->
                                <ul class="pagination" style="float: left" th:if="${books.totalPages > 0}"
                                    th:each="pageNumber : ${pageNumbers}">
                                    <!--                                <li class="page-item"><a class="page-link" href="#">Previous</a></li>-->
                                    <li th:class="${pageNumber==books.number+1} ? 'page-item active' : 'page-item'">
                                        <a class="page-link" th:href="@{/(size=${books.size}, page=${pageNumber})}"
                                           th:text="${pageNumber}"></a></li>
                                    <!--                                <li class="page-item"><a class="page-link" href="#">Next</a></li>-->
                                </ul>
                            </nav>
                            <div th:text="'Showing ' + ${books.getNumberOfElements()} + ' of ' + ${books.totalElements}
                            + ' entries'" class="hint-text" style="float: right"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            var scrollpos = localStorage.getItem('scrollpos');
            if (scrollpos) window.scrollTo(0, scrollpos);
        });

        window.onbeforeunload = function (e) {
            localStorage.setItem('scrollpos', window.scrollY);
        };
    </script>
    </div>
</main>
</body>
</html>
